[ -e ~/.zsh_snippets/colors ]        \
    && source ~/.zsh_snippets/colors \
    && autoload -U colors            \
    && colors

[ -e ~/.zshcomplete ]     && source ~/.zshcomplete
[ -e ~/.zsh_secret ]      && source ~/.zsh_secret
[ -f ~/repos/git/j/j.sh ] && source ~/repos/git/j/j.sh

export MY_HOSTNAME=`hostname`
[ -x "$(which shell-prompt 2>/dev/null)" ] && function precmd() {
    PROMPT=`shell-prompt`
    RPROMPT=`shell-prompt right`
}

HISTSIZE=100000
SAVEHIST=100000

case "$MY_HOSTNAME" in
    dev1)
    fpath=~/.zshfunc
    ;;
esac

setopt extended_history
setopt hist_ignore_space

autoload copy-earlier-word
zle -N copy-earlier-word

autoload edit-command-line
zle -N edit-command-line

setopt nobeep
setopt auto_cd
setopt multios
setopt extended_glob
setopt nullglob
setopt list_ambiguous
setopt no_nomatch
setopt interactivecomments
setopt listpacked
setopt complete_in_word

bindkey -v
bindkey "^A" beginning-of-line
bindkey "^E" end-of-line
bindkey "^N" accept-and-infer-next-history
bindkey "^P" push-line
bindkey "^R" history-incremental-search-backward
bindkey "^Y" copy-earlier-word
bindkey "^T" transpose-chars
bindkey " " magic-space
bindkey "\e[3~" delete-char
bindkey -M vicmd v edit-command-line

bindkey -M viins "^?" backward-delete-char
bindkey -M viins "^H" backward-delete-char
bindkey -M viins "^W" backward-delete-word
bindkey -M viins "^U" backward-kill-line
bindkey -M viins "^Y" yank

function mud() {
    rlwrap telnet "$1" 6715
}

function mem_usage {
    ps -eo size,ucmd | sort -rn | head -n$([ -z "$1" ] && echo 20 || echo $1)
}

function pubkey {
    [ -e "$HOME/.ssh/id_dsa.pub" ] || ssh-keygen -t dsa
    ssh "$1" "mkdir -p .ssh; cat - >> .ssh/authorized_keys" \
        < "$HOME/.ssh/id_dsa.pub"
}

case "$MY_HOSTNAME" in
    jinx.local)
    alias ls='gls --color=auto'
    alias sort='gsort'
    alias uniq='guniq'
    alias cp='gcp'
    alias cat='gcat'
    alias basename='gbasename'
    alias chown='gchown'
    alias chmod='gchmod'
    alias ci='cpan'
    ;;

    *)
    alias ci='sudo cpan i'
    alias ls='ls --color=auto'
    alias less='less -R'
    ;;
esac

export ACK_COLOR_FILENAME=clear
export ACK_COLOR_MATCH=red

case "$MY_HOSTNAME" in
    jinx.local)
    alias i='sudo port install'
    alias s='sudo port search'
    alias v='sudo port variants'
    alias ar='sudo /opt/local/apache2/bin/apachectl restart'
    ;;

    cheese)
    alias i='sudo aptitude install'
    alias s='sudo aptitude search'
    alias v='sudo aptitude variants'
    alias ar='sudo /etc/init.d/apache2 restart'
    ;;

    dev1)
    alias s='yum search'
    alias ar='sudo /etc/init.d/httpd restart'
    ;;

    jobs01)
    alias ar='sudo /sbin/service httpd restart'
    ;;
esac

alias grep='grep --color=auto'


case "$MY_HOSTNAME" in
    dev1)
    GREEN="%{$fg_bold[green]%}"
    YELLOW="%{$fg_bold[yellow]%}"
    NORM="%{$reset_color%}"

    export PS1="[%n@%m ${GREEN}%~${NORM}]%# "
    export RPS1="${YELLOW}%?${NORM}"
    export EDITOR='vim'
    ;;
esac

alias grep='grep --color=auto'
alias ll='ls -lhA'
alias mmi='make && sudo make install'
alias pmmi='perl Makefile.PL && mmi'

# only assuming EVERY tag is a CPAN release
alias downgrade-to-cpan='git reset --hard $(git describe --abbrev=0)'

alias vall='vim lib/**/*.pm'


alias cheese='ssh '"$WORK_DEV_IP"' -t ssh 10.1.1.81'
alias workdev="ssh $WORK_DEV_IP"
alias wdd="ssh $WORK_DEV_IP -t screen -dr dev"
alias prod="ssh $WORK_JOBS_IP"
alias ]='gnome-open'
alias moose='perl -Moose -E'

case "$MY_HOSTNAME" in
    cheese)
    alias dev1='ssh dev1'
    ;;
esac

alias sl='ls'
alias lcd='ls;cd'
for vim_typo in viim vmi bim cim vo, viom vin; do alias "$vim_typo"='vim'; done
