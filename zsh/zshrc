. ~/.zsh_snippets/colors
. ~/.zshcomplete
[ -f ~/repos/git/j/j.sh ] && source ~/repos/git/j/j.sh

export MY_HOSTNAME=`hostname -s`
function precmd() {
    [ -x "$(which shell-prompt)" ] && PROMPT=`shell-prompt`
    [ -x "$(which shell-prompt)" ] && RPROMPT=`shell-prompt right`
}

PS2="[${HIGRAY}][${HINORM}] \u@\h ]"

HISTSIZE=100000
SAVEHIST=100000

setopt extended_history
setopt hist_ignore_space

autoload copy-earlier-word
zle -N copy-earlier-word

autoload edit-command-line
zle -N edit-command-line

setopt nobeep
setopt auto_cd
setopt multios
setopt extended_glob
setopt nullglob
setopt list_ambiguous
setopt no_nomatch
setopt interactivecomments
setopt listpacked
setopt complete_in_word

bindkey -v
bindkey "^A" beginning-of-line
bindkey "^E" end-of-line
bindkey "^N" accept-and-infer-next-history
bindkey "^P" push-line
bindkey "^R" history-incremental-search-backward
bindkey "^Y" copy-earlier-word
bindkey "^T" transpose-chars
bindkey " " magic-space
bindkey "\e[3~" delete-char
bindkey -M vicmd v edit-command-line


#
alias ls='ls --color=auto --hide=_darcs'
alias grep='grep --color=auto'
export ACK_COLOR_FILENAME=clear
export ACK_COLOR_MATCH=red

alias nao="telnet nethack.alt.org"

case "$MY_HOSTNAME" in
    jinx)
    alias i='sudo port install'
    alias s='sudo port search'
    alias v='sudo port variants'
    alias httpd="sudo httpd"
    ;;

    culex)
    alias i='sudo pacman -S'
    alias s='sudo pacman -Ss'
    alias h='vim ~/.xmonad/xmonad.hs'
    ;;

    asonmay|roburritos)
    alias i='sudo aptitude install'
    alias s='sudo aptitude search'
    alias v='sudo aptitude variants'
    alias ar='sudo /etc/init.d/apache2 restart'
    ;;

    dev1)
    alias i='sudo port install'
    alias s='sudo port search'
    alias v='sudo port variants'
    alias ar='sudo /etc/init.d/httpd restart'
    ;;

    jobs01)
    alias ar='sudo /sbin/service httpd restart'
    ;;
esac

alias ci='sudo cpan -i'

alias ll='ls -lhA'
alias mmi='make && sudo make install'
alias pmmi='perl Makefile.PL && mmi'
alias sl='ls'
alias downgrade-to-cpan='git reset --hard $(git describe --abbrev=0)'

alias syntax-perl='ls lib/**/*.pm | while read pm; do perl -Ilib -c "$pm"; done'

case "$MY_HOSTNAME" in
    asonmay)
    ;;

    *)
    alias asdf="ssh jasonmay@j.asonmay.net"
    alias adsf="ssh jasonmay@j.asonmay.net"
    ;;
esac

case "$MY_HOSTNAME" in
    culex)
    alias culex='ssh 127.0.0.1'
    ;;

    jinx)
    alias culex='ssh jasonmay@192.168.1.101'
    ;;

    *)
    alias culex='ssh jasonmay@68.63.156.66'
    ;;
esac

case "$MY_HOSTNAME" in
    roburritos)
    alias dev1='ssh dev1'
    ;;
esac

alias workdev='ssh jmay@silverbacknetwork.com'
alias prod='ssh jmay@65.61.13.199'
alias home='ssh jasonmay@68.63.156.66'
alias ]='gnome-open'
moose() {
    perl -Moose=$1 -E"$2; package main; $3"
}

function mud() {
    rlwrap telnet "$1" 6715
}

# doy rules
function mem_usage {
    ps -eo size,ucmd | sort -rn | head -n$([ -z "$1" ] && echo 20 || echo $1)
}

function pubkey {
    [ -e "$HOME/.ssh/id_dsa.pub" ] || ssh-keygen -t dsa
    ssh "$1" "mkdir -p .ssh; cat - >> .ssh/authorized_keys" < "$HOME/.ssh/id_dsa.pub"
}

